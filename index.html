<!DOCTYPE html>
<html>
  <head>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Stich Ansagen</title>
      <link rel="stylesheet" href="https://pyscript.net/releases/2024.11.1/core.css">
      <script type="module" src="https://pyscript.net/releases/2024.11.1/core.js"></script>
      <script type="py" src="main.py" config="pyscript.toml"></script>
      <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">

      <style>
        * {
            font-size: small;
        }

        :root {
            --bg-color: #f9f9f9;
            --text-color: #333;
            --header-bg: green;
            --header-text: white;
            --table-bg: white;
            --th-bg: lightgreen;
            --border-color: #ccc;
            --icon-color: white;
            --icon-hover: #d9d9d9;
        }

        body.dark-mode {
            --bg-color: #121212;
            --text-color: #e0e0e0;
            --header-bg: #004d40;
            --header-text: #e0e0e0;
            --table-bg: #1e1e1e;
            --th-bg: #2e7d32;
            --border-color: #444;
            --icon-color: #e0e0e0;
            --icon-hover: #fff;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            min-height: 100vh;
            background-color: var(--bg-color);
            color: var(--text-color);
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            height: 3rem;
            padding: 1rem;
            background-color: var(--header-bg);
            color: var(--header-text);
            box-sizing: border-box;
            position: relative;
        }

        .info-text {
            margin: 0;
            font-size: 1rem;
            font-weight: bold;
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
            position: absolute;
            right: 1rem;
            top: 0;
            height: 100%;
        }

        .icon-button {
            display: block;
            background: none;
            border: none;
            color: var(--icon-color);
            font-size: 1.5rem;
            cursor: pointer;
        }

        .icon-button:hover {
            color: var(--icon-hover);
        }

        .container {
            width: 100%;
            margin: 0px;
            padding: 0px;
            display: flex;
            flex-direction: column;
            
        }

        table {
            width: 100%;
            border-collapse: collapse;
            text-align: left;
            background-color: var(--table-bg);
            border: 1px solid var(--border-color);
            color: var(--text-color);
        }

        th, td {
            border: 1px solid var(--border-color);
            word-wrap: break-word;
        }

        th {
            background-color: var(--th-bg);
        }

        th:first-child, td:first-child {
            width: 10%;
            padding-left: 1rem;
            font-weight: bold;
        }

        @media (max-width: 600px) {
            .header {
                flex-direction: column;
                align-items: flex-start;
            }
        }

        #inputs {
            position: absolute;
            opacity: 0;
            width: 1px;
            height: 1px;
            pointer-events: none;
        }
        .dran {
            color: red;
            animation: blink-animation 1s steps(5, start) infinite;
            -webkit-animation: blink-animation 1s steps(5, start) infinite;
        }
        @keyframes blink-animation {
            to {
                visibility: hidden;
            }
        }
        @-webkit-keyframes blink-animation {
            to {
                visibility: hidden;
            }
        }
      </style>
  </head>
  <body>
    <div class="header">
        <p id="output" class="info-text"></p>
        <div class="header-controls">
            <button id="darkModeToggle" class="icon-button">
                <i class="fas fa-moon"></i>
            </button>
            <a href="settings.html" class="icon-button">
                <i class="fas fa-cog"></i>
            </a>
        </div>
    </div>
    <input type="text" id="inputs" inputmode="numeric" autocomplete="off" />
    <div id="game" class="container"></div>
    
    <script>
        // Dark Mode Logic
        const toggleButton = document.getElementById('darkModeToggle');
        const icon = toggleButton.querySelector('i');
        const body = document.body;

        function enableDarkMode() {
            body.classList.add('dark-mode');
            icon.classList.remove('fa-moon');
            icon.classList.add('fa-sun');
            localStorage.setItem('darkMode', 'enabled');
        }

        function disableDarkMode() {
            body.classList.remove('dark-mode');
            icon.classList.remove('fa-sun');
            icon.classList.add('fa-moon');
            localStorage.setItem('darkMode', 'disabled');
        }

        // Check for saved user preference
        const savedDarkMode = localStorage.getItem('darkMode');

        if (savedDarkMode === 'enabled') {
            enableDarkMode();
        } else if (savedDarkMode === 'disabled') {
            disableDarkMode();
        } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            enableDarkMode();
        }

        toggleButton.addEventListener('click', () => {
            if (body.classList.contains('dark-mode')) {
                disableDarkMode();
            } else {
                enableDarkMode();
            }
        });

        // Input Focus Logic
        const hiddenInput = document.getElementById('inputs');
    
        function maintainFocus() {
          if (document.activeElement !== hiddenInput) {
            hiddenInput.focus();
          }
        }
    
        document.addEventListener('click', maintainFocus);
        document.addEventListener('focus', maintainFocus, true);
    
        hiddenInput.focus();
      </script>
  </body>
</html>
